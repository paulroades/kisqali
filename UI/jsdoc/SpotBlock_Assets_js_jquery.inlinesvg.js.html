<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: SpotBlock/Assets/js/jquery.inlinesvg.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: SpotBlock/Assets/js/jquery.inlinesvg.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>ï»¿/*!
 * InlineSVG
 *
 * This is a jQuery plugin that takes an image selector as an argument having a
 * SVG as source. Then it inlines the SVG so that the SVG stroke and path can
 * be manipulated using plain CSS.
 *
 * @license MIT
 * @version 2.0.0
 * @see {@link https://github.com/createlogic/InlineSVG|GitHub}
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2010-2015 Bilal Niaz Awan
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

(function ($) {

    'use strict';

    /**
     * @name jQuery
     * @constructor
     */

    /**
     * @callback jQuery.inlineSVG~eachAfter
     * @this DOM
     */

    /**
     * @callback jQuery.inlineSVG~allAfter
     * @this null
     */

    /**
     * @callback jQuery.inlineSVG~beforeReplace
     * @param {jQuery} $img - Source &lt;img> element
     * @param {jQuery} $svg - &lt;svg> element to replace
     * @param {jQuery.inlineSVG~beforeReplaceNext} next - Callback to next element
     * @this null
     */

    /**
     * @callback jQuery.inlineSVG~beforeReplaceNext
     * @param {Boolean} [replace=true] - Replace element otherwise just go to next
     */

    /**
     * @typedef {Object} jQuery.inlineSVG~options
     * @property {?jQuery.inlineSVG~eachAfter} [eachAfter] - Callback for each replaced &lt;img> element
     * @property {?jQuery.inlineSVG~allAfter} [allAfter] - Callback after all &lt;img> elements is replaced
     * @property {?jQuery.inlineSVG~beforeReplaceCallback} [beforeReplace] - Callback for each item before replaced
     * @property {?String} [replacedClass='replaced-svg'] - Class name to add to new &lt;svg> DOM-element
     * @property {Boolean} [keepSize=true] - Set "width" and "height" attributes from source &lt;img> to new &lt;svg>
     * @property {Boolean} [keepStyle=true] - Set "style" attribute from source &lt;img> to new &lt;svg>
     */

    /**
     * @name inlineSVG
     * @memberof jQuery
     * @param {jQuery.inlineSVG~options} [options]
     * @this jQuery
     * @returns {jQuery} Source jQuery instance
     * @public
     * @static
     */
    $.fn.inlineSVG = function (options) {

        options = $.extend({
            eachAfter: null,
            allAfter: null,
            beforeReplace: null,
            replacedClass: 'replaced-svg',
            keepSize: true,
            keepStyle: true
        }, (options || {}));

        var $list = this;
        var counter = 0;

        return $list.each(function () {

            var $img = $(this);
            var imgID = $img.attr('id');
            var imgClass = $img.attr('class');
            var imgURL = $img.attr('src') || $img.attr('data-src');

            $.get(imgURL, function (data) {

                // Get the SVG tag, ignore the rest
                var $svg = $(data).find('svg');
                var classes = [];

                // Add replaced image's ID to the new SVG
                if (imgID) {
                    $svg.attr('id', imgID);
                }

                // Add replaced image's classes to the new SVG
                //Actually lets not do that. JOPA :)
                //if (imgClass) {
                //    classes.push(imgClass);
                //}
                //if (options.replacedClass) {
                //    classes.push(options.replacedClass);
                //}
                //$svg.attr('class', classes.join(' '));
                $svg.attr('class', options.replacedClass);

                // Remove any invalid XML tags as per http://validator.w3.org
                $svg.removeAttr('xmlns:a');

                if (options.keepSize) {
                    var w = $img.attr('width');
                    var h = $img.attr('height');

                    if (w) {
                        $svg.attr('width', w);
                    }
                    if (h) {
                        $svg.attr('height', h);
                    }
                }
                if (options.keepStyle) {
                    var style = $img.attr('style');

                    if (style) {
                        $svg.attr('style', style);
                    }
                }

                function cb(replace) {

                    replace = ($.type(replace) === 'boolean') ? replace : true;

                    if (replace) {
                        // Replace image with new SVG
                        $img.replaceWith($svg);

                        // Callback for each element
                        options.eachAfter &amp;&amp; options.eachAfter.call($svg.get(0));
                    } else {
                        $svg.remove();
                    }

                    // Check for all is completed
                    if (++counter === $list.length) {
                        options.allAfter &amp;&amp; options.allAfter.call(null);
                    }
                }

                if (options.beforeReplace) {
                    options.beforeReplace.call(null, $img, $svg, cb);
                } else {
                    cb();
                }

            }, 'xml');

        });
    };
})(jQuery);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="jQuery.html">jQuery</a></li></ul><h3>Global</h3><ul><li><a href="global.html#closeOverlay">closeOverlay</a></li><li><a href="global.html#openExternalLink">openExternalLink</a></li><li><a href="global.html#openOverlay">openOverlay</a></li><li><a href="global.html#updateVerticalPositionOfPopup">updateVerticalPositionOfPopup</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Feb 03 2016 13:02:14 GMT+0100 (Romance Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
